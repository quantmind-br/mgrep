{"id":"mgrep-2vy","title":"Support exception patterns (!pattern negation)","description":"Implement support for exception patterns in ignore configuration.\n\n**Feature:**\nAllow users to negate patterns to keep specific files that would otherwise be ignored:\n```yaml\nignore:\n  exceptions:\n    - \"!dist/index.js\"       # keep this specific file\n    - \"!*.d.ts\"              # keep TypeScript definitions\n    - \"!vendor/important/\"   # keep this vendor directory\n```\n\n**Implementation:**\n- Modify pattern loading to handle ! prefix\n- Use ignore library's built-in negation support\n- Apply exceptions after all other patterns\n\n**Note:** The `ignore` library already supports negation patterns natively.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T16:18:54.626845843-03:00","created_by":"diogo","updated_at":"2025-12-31T16:35:14.398167652-03:00","closed_at":"2025-12-31T16:35:14.398167652-03:00","close_reason":"Closed"}
{"id":"mgrep-331","title":"Add GENERATED_PATTERNS for build outputs and lock files","description":"Add generated file patterns to ignore-patterns.ts.\n\n**Patterns to include (~67):**\n- Minified: *.min.js, *.min.css, *-min.js\n- Source maps: *.map, *.js.map, *.css.map\n- Build output: dist/, build/, out/, .next/, .nuxt/, .svelte-kit/\n- Lock files: package-lock.json, yarn.lock, pnpm-lock.yaml, Cargo.lock, go.sum, etc.\n- Generated code: *.generated.*, *.pb.go, *.pb.ts, *_pb2.py, *.designer.cs\n- Type definitions: *.d.ts (vendored)\n- Coverage: coverage/, htmlcov/, .nyc_output/\n- Snapshots: __snapshots__/, *.snap\n- Documentation builds: docs/_build/, site/, _site/, javadoc/\n\n**Reference:** GitHub Linguist generated.rb, Appendix A.2 in PLAN.md","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T16:18:19.82885704-03:00","created_by":"diogo","updated_at":"2025-12-31T16:18:19.82885704-03:00","dependencies":[{"issue_id":"mgrep-331","depends_on_id":"mgrep-qz4","type":"blocks","created_at":"2025-12-31T16:20:06.349301093-03:00","created_by":"diogo"}]}
{"id":"mgrep-34p","title":"Add --include-vendor and --include-generated CLI flags","description":"Add CLI flags to override category settings.\n\n**Commands:**\n```bash\nmgrep sync --include-vendor    # Index vendor directories\nmgrep sync --include-generated # Index generated files\nmgrep sync --include-all       # Index everything (disable all categories)\n```\n\n**Implementation:**\n- Add flags to search and sync commands\n- Override config.ignore.categories for this run only\n- Useful for one-off indexing of vendor code","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:34.406520622-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.619947304-03:00","closed_at":"2025-12-31T16:41:28.619947304-03:00","close_reason":"Closed"}
{"id":"mgrep-57a","title":"Update README.md with File Filtering documentation","description":"Add comprehensive File Filtering section to README.md.\n\n**Content to add:**\n1. Default Categories table (vendor, generated, binary, config)\n2. Custom Configuration example (.mgreprc.yaml)\n3. Precedence rules (.gitignore \u003e .mgrepignore \u003e defaults \u003e CLI)\n4. CLI flags documentation\n5. Examples of common configurations\n\n**Reference:** Section 6.1 in PLAN.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:38.213353972-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.620989879-03:00","closed_at":"2025-12-31T16:41:28.620989879-03:00","close_reason":"Closed"}
{"id":"mgrep-6sc","title":"Epic: Improve Ignore Patterns","description":"Comprehensive improvement to mgrep ignore patterns based on PLAN.md.\n\n**Goals:**\n- Expand default patterns (vendor, generated, binary, config)\n- Add configuration support for pattern categories\n- Implement intelligent content-based detection\n- Improve CLI/UX for ignore management\n\n**Phases:**\n1. Core Pattern Expansion (High Priority)\n2. Configuration Integration (Medium Priority)\n3. Intelligent Detection (Low Priority)\n4. CLI/UX Improvements\n5. Documentation\n\n**References:**\n- GitHub Linguist vendor.yml and generated.rb\n- ripgrep, Silver Searcher ignore patterns\n- Semgrep ignore docs","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-31T16:17:56.21490615-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:52.153084595-03:00","closed_at":"2025-12-31T16:41:52.153084595-03:00","close_reason":"Closed"}
{"id":"mgrep-9mu","title":"Add BINARY_PATTERNS for media and binary files","description":"Expand binary file patterns in ignore-patterns.ts.\n\n**Patterns to include (~89):**\n- Executables: *.exe, *.dll, *.so, *.dylib, *.o, *.class, *.jar\n- Archives: *.zip, *.tar, *.gz, *.7z, *.rar, *.tgz\n- Images: *.png, *.jpg, *.gif, *.webp, *.ico, *.psd\n- Audio/Video: *.mp3, *.mp4, *.wav, *.avi, *.mkv\n- Fonts: *.ttf, *.otf, *.woff, *.woff2\n- Documents: *.pdf, *.doc, *.xlsx, *.ppt\n- Databases: *.db, *.sqlite, *.sqlite3\n- ML Models: *.onnx, *.h5, *.pkl, *.safetensors, *.pt, *.pth\n- 3D/Game: *.fbx, *.blend, *.unity\n\n**Reference:** Appendix A.3 in PLAN.md","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T16:18:24.910112999-03:00","created_by":"diogo","updated_at":"2025-12-31T16:18:24.910112999-03:00","dependencies":[{"issue_id":"mgrep-9mu","depends_on_id":"mgrep-qz4","type":"blocks","created_at":"2025-12-31T16:20:06.354726205-03:00","created_by":"diogo"}]}
{"id":"mgrep-9w1","title":"Add VENDOR_PATTERNS for dependency directories","description":"Add comprehensive vendor/dependency patterns to ignore-patterns.ts.\n\n**Patterns to include (~50):**\n- Node.js: node_modules/, .yarn/, .pnp.*\n- Python: venv/, .venv/, __pycache__/, *.egg-info/, site-packages/\n- Ruby: vendor/bundle/\n- Go: vendor/, Godeps/\n- PHP: vendor/\n- Rust: target/\n- .NET: packages/, bin/, obj/\n- iOS/macOS: Pods/, Carthage/Build/\n- Java/Kotlin: gradle/wrapper/, .gradle/\n- Generic: bower_components/, jspm_packages/, third_party/, externals/\n\n**Reference:** GitHub Linguist vendor.yml, Appendix A.1 in PLAN.md","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T16:18:14.312663659-03:00","created_by":"diogo","updated_at":"2025-12-31T16:18:14.312663659-03:00","dependencies":[{"issue_id":"mgrep-9w1","depends_on_id":"mgrep-qz4","type":"blocks","created_at":"2025-12-31T16:20:06.343961914-03:00","created_by":"diogo"}]}
{"id":"mgrep-cwk","title":"Add --show-ignored flag to sync dry-run","description":"Enhance sync dry-run to show ignored files breakdown.\n\n**Command:** `mgrep sync --dry-run --show-ignored`\n\n**Output:**\n```\nSyncing /project...\n  Files: 234 would be indexed, 1,847 ignored\n\nIgnored breakdown:\n  - vendor:    1,203 files (node_modules/, vendor/)\n  - generated:   412 files (dist/, *.min.js)\n  - binary:      189 files (*.png, *.pdf)\n  - gitignore:    43 files (.env, secrets/)\n```\n\n**Implementation:**\n- Track ignored files by category during sync\n- Add --show-ignored flag (only with --dry-run)\n- Collect statistics without affecting performance in normal mode","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:30.311725096-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.618830498-03:00","closed_at":"2025-12-31T16:41:28.618830498-03:00","close_reason":"Closed"}
{"id":"mgrep-euh","title":"Add 'mgrep config --show-ignore' command","description":"Add CLI command to display active ignore patterns.\n\n**Command:** `mgrep config --show-ignore`\n\n**Output format:**\n```\nActive Ignore Patterns:\n\nCategories:\n  ✓ vendor (enabled) - 53 patterns\n  ✓ generated (enabled) - 67 patterns  \n  ✓ binary (enabled) - 89 patterns\n  ✗ config (disabled) - 25 patterns\n\nAdditional patterns: 2\n  - internal-tools/\n  - legacy/\n\nExceptions: 1\n  - !dist/index.js\n\nTotal active patterns: 211\n```\n\n**Implementation:**\n- Add --show-ignore flag to config subcommand (or create new subcommand)\n- Load current config and display pattern summary","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:20.147070737-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.615991138-03:00","closed_at":"2025-12-31T16:41:28.615991138-03:00","close_reason":"Closed"}
{"id":"mgrep-hb8","title":"Integrate content detection in sync pipeline","description":"Integrate file-analysis functions into the sync pipeline.\n\n**Changes to src/lib/utils.ts:**\n1. Import file-analysis functions\n2. Before uploading a file, optionally check:\n   - isMinified() for .js/.css files\n   - hasGeneratedMarker() for text files\n3. Add config option to enable/disable content detection\n4. Log/report detected generated files\n\n**Performance considerations:**\n- Only run detection on files that pass pattern-based filtering\n- Detection runs on already-read buffer (no extra I/O)\n- Make detection optional via config (default: enabled)\n\n**Config addition:**\n```yaml\nignore:\n  detectGenerated: true  # Enable content-based detection\n```","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:04.358690653-03:00","created_by":"diogo","updated_at":"2025-12-31T16:38:27.129811974-03:00","closed_at":"2025-12-31T16:38:27.129811974-03:00","close_reason":"Closed","dependencies":[{"issue_id":"mgrep-hb8","depends_on_id":"mgrep-ncb","type":"blocks","created_at":"2025-12-31T16:20:09.40635824-03:00","created_by":"diogo"}]}
{"id":"mgrep-jdm","title":"Write unit tests for file-analysis module","description":"Create comprehensive tests for file-analysis.ts.\n\n**Test file:** `src/lib/file-analysis.test.ts`\n\n**Test cases for isMinified():**\n- Returns true for single-line minified JS\n- Returns true for file with avg line \u003e 500 chars\n- Returns false for normal formatted code\n- Ignores non-JS/CSS files\n\n**Test cases for hasGeneratedMarker():**\n- Detects Go-style generated marker\n- Detects various // Generated by patterns\n- Detects # Generated by (Python/Ruby)\n- Returns false for normal files\n\n**Test cases for hasSourceMapReference():**\n- Detects //# sourceMappingURL= at end\n- Detects /*# sourceMappingURL= variant\n- Returns false when not present","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:08.030225964-03:00","created_by":"diogo","updated_at":"2025-12-31T16:38:27.132889165-03:00","closed_at":"2025-12-31T16:38:27.132889165-03:00","close_reason":"Closed","dependencies":[{"issue_id":"mgrep-jdm","depends_on_id":"mgrep-ncb","type":"blocks","created_at":"2025-12-31T16:20:09.412055047-03:00","created_by":"diogo"}]}
{"id":"mgrep-ncb","title":"Create file-analysis.ts with content detection functions","description":"Create a new module for content-based file analysis.\n\n**File:** `src/lib/file-analysis.ts`\n\n**Functions to implement:**\n\n1. **isMinified(content, extension)**: Detect minified JS/CSS\n   - Return true if avg line length \u003e 500 chars\n   - Or if \u003c 10 lines and \u003e 10KB\n   - Only for .js, .css, .mjs extensions\n\n2. **hasGeneratedMarker(content)**: Detect generated files by header\n   - Check first 10 lines for markers like:\n     - `// Code generated .* DO NOT EDIT`\n     - `// Generated by `\n     - `# This file is automatically generated`\n     - `// AUTO-GENERATED`\n\n3. **hasSourceMapReference(content)**: Detect source map references\n   - Check last 3 lines for sourceMappingURL comments\n\n**Reference:** Phase 3 (Fase 3) in PLAN.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:00.096332378-03:00","created_by":"diogo","updated_at":"2025-12-31T16:38:27.131753543-03:00","closed_at":"2025-12-31T16:38:27.131753543-03:00","close_reason":"Closed"}
{"id":"mgrep-nhp","title":"Add CONFIG_PATTERNS for CI/IDE files (disabled by default)","description":"Add optional config/CI patterns to ignore-patterns.ts.\n\n**Patterns to include:**\n- CI/CD: .github/, .gitlab/, .circleci/, .travis.yml, Jenkinsfile\n- Containers: Dockerfile*, docker-compose*.yml, .dockerignore\n- IDE: .vscode/, .idea/, *.sublime-*, .editorconfig\n- Git: .gitattributes, .gitmodules\n- Version managers: .npmrc, .yarnrc*, .nvmrc, .python-version\n\n**Note:** This category is DISABLED by default as these files may contain useful information.\nUsers can enable via config.\n\n**Reference:** Section 1.4 in PLAN.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:18:29.751646875-03:00","created_by":"diogo","updated_at":"2025-12-31T16:18:29.751646875-03:00","dependencies":[{"issue_id":"mgrep-nhp","depends_on_id":"mgrep-qz4","type":"blocks","created_at":"2025-12-31T16:20:06.359452144-03:00","created_by":"diogo"}]}
{"id":"mgrep-pwd","title":"Create .mgrepignore.example file","description":"Create an example .mgrepignore file for documentation.\n\n**File:** `.mgrepignore.example`\n\n**Content:**\n```gitignore\n# Example .mgrepignore file\n# Uses gitignore syntax\n\n# Project-specific exclusions\ninternal-tools/\nlegacy-code/\n*.proprietary\n\n# Override default behavior\n!dist/bundle.js  # Keep this generated file\n!*.d.ts          # Keep TypeScript definitions\n```\n\n**Reference:** Section 6.2 in PLAN.md","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-31T16:19:41.97904038-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.622025752-03:00","closed_at":"2025-12-31T16:41:28.622025752-03:00","close_reason":"Closed"}
{"id":"mgrep-qz4","title":"Create ignore-patterns.ts module with pattern categories","description":"Create a new module `src/lib/ignore-patterns.ts` with:\n\n**Implementation:**\n1. Define `IgnoreCategory` interface with name, description, patterns, enabled flag\n2. Export `IGNORE_CATEGORIES` array with all pattern categories\n3. Implement `getDefaultIgnorePatterns(enabledCategories?)` function\n4. Categories: vendor, generated, binary, config (config disabled by default)\n\n**Files:**\n- Create: `src/lib/ignore-patterns.ts`\n\n**Acceptance Criteria:**\n- [ ] Interface for pattern categories defined\n- [ ] Function to get patterns by category\n- [ ] Exports all pattern constants\n- [ ] TypeScript strict mode compliant","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T16:18:08.239340545-03:00","created_by":"diogo","updated_at":"2025-12-31T16:20:30.855637589-03:00"}
{"id":"mgrep-r57","title":"Add 'mgrep check-ignore \u003cpath\u003e' command","description":"Add CLI command to test if a file would be ignored.\n\n**Command:** `mgrep check-ignore path/to/file.js`\n\n**Output:**\n```\npath/to/file.js would be IGNORED\n  Reason: matches pattern '*.min.js' (category: generated)\n```\n\nOr:\n```\npath/to/file.ts would NOT be ignored\n```\n\n**Use cases:**\n- Debugging why a file isn't being indexed\n- Testing custom patterns before adding them\n- Similar to `git check-ignore`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T16:19:24.564641005-03:00","created_by":"diogo","updated_at":"2025-12-31T16:41:28.617766071-03:00","closed_at":"2025-12-31T16:41:28.617766071-03:00","close_reason":"Closed"}
{"id":"mgrep-ur9","title":"Write unit tests for ignore-patterns module","description":"Create comprehensive tests for the ignore-patterns module.\n\n**Test file:** `src/lib/ignore-patterns.test.ts`\n\n**Test cases:**\n1. getDefaultIgnorePatterns() returns all enabled category patterns\n2. getDefaultIgnorePatterns(['vendor']) returns only vendor patterns\n3. CONFIG_PATTERNS not included by default (disabled)\n4. Pattern arrays are readonly and not empty\n5. No duplicate patterns across categories\n6. All patterns are valid glob syntax\n\n**Acceptance Criteria:**\n- [ ] All category filtering works correctly\n- [ ] Edge cases covered (empty array, invalid category)\n- [ ] Tests pass with `npm run test:unit`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T16:18:34.329655707-03:00","created_by":"diogo","updated_at":"2025-12-31T17:22:07.914640061-03:00","closed_at":"2025-12-31T17:22:07.914640061-03:00","close_reason":"Tests already implemented and passing (21 tests covering all acceptance criteria)"}
{"id":"mgrep-ybd","title":"Add IgnoreConfigSchema to config.ts","description":"Add Zod schema for ignore configuration in config.ts.\n\n**Implementation:**\n```typescript\nconst IgnoreConfigSchema = z.object({\n  categories: z.object({\n    vendor: z.boolean().default(true),\n    generated: z.boolean().default(true),\n    binary: z.boolean().default(true),\n    config: z.boolean().default(false),\n  }).default({}),\n  additional: z.array(z.string()).default([]),\n  exceptions: z.array(z.string()).default([]),\n}).default({});\n```\n\n**Changes:**\n- Add IgnoreConfigSchema to config.ts\n- Add `ignore` field to ConfigSchema\n- Export IgnoreConfig type\n- Update MgrepConfig interface\n- Update DEFAULT_CONFIG\n- Add env var support for categories\n\n**Reference:** Section 2.3 in PLAN.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T16:18:45.502070828-03:00","created_by":"diogo","updated_at":"2025-12-31T16:31:44.397878898-03:00","closed_at":"2025-12-31T16:31:44.397878898-03:00","close_reason":"Closed"}
{"id":"mgrep-zq6","title":"Integrate ignore patterns into NodeFileSystem","description":"Modify NodeFileSystem to use the new pattern categories from config.\n\n**Changes to src/lib/file.ts:**\n1. Update FileSystemOptions to accept MgrepConfig or ignore config\n2. Import getDefaultIgnorePatterns from ignore-patterns.ts\n3. Combine patterns: default categories + additional + .gitignore + .mgrepignore\n4. Replace DEFAULT_IGNORE_PATTERNS usage with category-based patterns\n5. Maintain backward compatibility\n\n**Integration points:**\n- context.ts: createFileSystem() should pass config.ignore\n- utils.ts: initialSync should benefit from new patterns\n\n**Acceptance Criteria:**\n- [ ] NodeFileSystem respects category toggles\n- [ ] Additional patterns are applied\n- [ ] Existing tests continue to pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T16:18:50.409013435-03:00","created_by":"diogo","updated_at":"2025-12-31T16:35:14.39634587-03:00","closed_at":"2025-12-31T16:35:14.39634587-03:00","close_reason":"Closed","dependencies":[{"issue_id":"mgrep-zq6","depends_on_id":"mgrep-qz4","type":"blocks","created_at":"2025-12-31T16:20:07.645146256-03:00","created_by":"diogo"},{"issue_id":"mgrep-zq6","depends_on_id":"mgrep-ybd","type":"blocks","created_at":"2025-12-31T16:20:07.650791846-03:00","created_by":"diogo"}]}
